<!doctype html><html dir=ltr lang=en-us><head>
<link rel=stylesheet type=text/css href=/css/style.css>
<meta property="og:title" content="Performance - Tuning | RPMA">
<meta property="og:description" content="Performance - Tuning A collection of the best methods, practices, and configuration values known for delivering the best possible performance in a consistent and predictable way for the workloads built on the librpma library.
General notes The Performance - Tuning aims to collect all tested and proven procedures with known beneficial effects on the performance of the workloads built on the librpma library. Nonetheless, each change of configuration should be set up and tested in a testing environment before being applied to a production system.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://pmem.io/rpma/documentation/perf-tuning/"><meta property="article:section" content="rpma">
<meta charset=utf-8>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<title>Performance - Tuning | RPMA</title>
<meta name=author content="PMem.io">
<meta name=description content="Persistent Memory Development Kit (PMDK) provides support for transactional and atomic operations to keep the data consistent and durable.  PMDK is a collection of open-source libraries and tools that are available for both Linux and Windows OS.  PMDK facilitates persistent memory programming adoption with higher level language support.  Currently, Java, Python, Rust, Go, C and C++ support is fully validated and delivered on Linux and Windows.  This new generation of persistent memory from Intel has introduced a third memory tier (memory persistence, memory tiering).  In addition to memory and storage tiers, the persistent memory tier offers greater capacity than DRAM and significantly faster performance than storage.  Applications can access persistent memory-resident data structures in-place, like they do with traditional memory, eliminating the need to page blocks of data back and forth between memory and storage. PMDK provides a toolkit for memory hierarchy, memory caching, virtual memory and memory tiering.  PMDK-PMEM toolkit provides operational modes in either app direct mode or memory mode. App Direct Mode provides memory persistent, high availability less downtime and significantly faster storage.  In memory mode provides high memory capacity at lower cost and is transparent to applications.  Memory is volatile in memory mode and persistent in App Direct mode">
<meta name=robots content="index, follow, archive">
<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,900&display=swap" rel=stylesheet type=text/css>
<link rel=stylesheet href=/css/bootstrap.css type=text/css>
<link rel=stylesheet href=/css/style.css type=text/css>
<link rel=stylesheet href=/css/dark.css type=text/css>
<link rel=stylesheet href=/css/font-icons.css type=text/css>
<link rel=stylesheet href=/css/animate.css type=text/css>
<link rel=stylesheet href=/css/magnific-popup.css type=text/css>
<link rel=stylesheet href=/css/et-line.css type=text/css>
<link rel=stylesheet href=/css/components/bs-switches.css type=text/css>
<link rel=stylesheet href=/css/custom.css type=text/css>
<meta name=viewport content="initial-scale=1,viewport-fit=cover">
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css type=text/css>
<link rel=stylesheet href="/css/colors.php?color=FE9603" type=text/css>
<link rel=stylesheet href=/css/template/fonts.css type=text/css>
<link rel=stylesheet href=/css/template/seo.css type=text/css>
</head>
<body class=stretched>
<div id=wrapper class=clearfix>
<header id=header class="transparent-header floating-header header-size-md sticky-header">
<div id=header-wrap class=dark-mode>
<div class="container dark-mode">
<div class=header-row>
<div id=logo class=logo_dark>
<a href=/ class=standard-logo data-dark-logo=images/logo-dark.png><img src=https://pmem.io/images/pmem_logo.png alt=PMem.io></a>
<a href=/ class=retina-logo data-dark-logo=images/logo-dark@2x.png><img src=https://pmem.io/images/pmem_logo.png alt=PMem.io></a>
</div>
<div id=logo class=logo_light>
<a href=/ class=standard-logo data-dark-logo=images/logo-dark.png><img src=https://pmem.io/images/pmem_logo_white.png alt=PMem.io></a>
<a href=/ class=retina-logo data-dark-logo=images/logo-dark@2x.png><img src=https://pmem.io/images/pmem_logo_white.png alt=PMem.io></a>
</div>
<div class=header-misc>
<div id=top-search class=header-misc-icon>
<a href=# id=top-search-trigger><i class=icon-line-search></i><i class=icon-line-cross></i></a>
</div>
<div class=top-links>
<ul class=top-links-container>
<li>
<div id=darkSwitch class="dark-mode header-misc-icon d-md-block">
<a href=#><i id=darkSwitchToggle></i></a>
</div>
</li>
</ul>
</div>
</div>
<div id=primary-menu-trigger><svg class="svg-trigger" viewBox="0 0 100 100"><path d="m30 33h40c3.722839.0 7.5 3.126468 7.5 8.578427C77.5 47.030386 74.772971 50 70 50H50"/><path d="m30 50h40"/><path d="m70 67H30s-7.5-.802118-7.5-8.365747C22.5 51.070624 30 50 30 50h20"/></svg>
</div>
<nav class="primary-menu with-arrows">
<ul class=menu-container>
<li class="menu-item mega-menu">
<div class=menu-link>
<div><a href=/developer-hub>Developer Hub</a></div>
</div>
<div class="mega-menu-content mega-menu-style-2 px-0">
<div class="container dark-mode">
<div class=row>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class=fbox-content>
<p class=fw-bold>For Developers</p>
<p>Everything you need to know about Persistent Memory.</p>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=https://docs.pmem.io/persistent-memory/getting-started-guide>
<p>Get started <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/pmdk>
<p>PMDK <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/repoindex>
<p>PMem Repositories <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/pmemkv>
<p>PMemKV <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=http://memkind.github.io/memkind/>
<p>Memkind <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/community/#newsletter>
<p>Newsletter <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://tieredmemdb.github.io/>
<p>TieredMemDB <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
</li>
<li class="menu-item mega-menu">
<div class=menu-link>
<div><a href=/learn>Learn</a></div>
</div>
<div class="mega-menu-content mega-menu-style-2 px-0">
<div class="container dark-mode">
<div class=row>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class=fbox-content>
<p class=fw-bold>Access our Documentation</p>
<p>Learn more about Persistent Memory features and capabilities.</p>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=/books>
<p>Books <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://docs.pmem.io/persistent-memory/>
<p>Docs <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/glossary>
<p>Glossary <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://docs.pmem.io/ipmctl-user-guide/>
<p>ipmctl User Guide <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://docs.pmem.io/ndctl-user-guide/>
<p>ndctl User Guide <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=/faq>
<p>FAQ <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/knowledgebase>
<p>Knowledge base <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/tutorials>
<p>Tutorials <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/videos>
<p>Videos <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/webinars>
<p>Webinars <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
</li>
<li class="menu-item mega-menu">
<div class=menu-link>
<div><a href=/community>Community</a></div>
</div>
<div class="mega-menu-content mega-menu-style-2 px-0">
<div class="container dark-mode">
<div class=row>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class=fbox-content>
<p class=fw-bold>Get Connected</p>
<p>Join an ever-growing community of PMDK-PMEM developers online or in person.</p>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=/events>
<p>Events <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://groups.google.com/group/pmem>
<p>Forum <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://pmem-io.slack.com/join/shared_invite/enQtNzU4MzQ2Mzk3MDQwLWQ1YThmODVmMGFkZWI0YTdhODg4ODVhODdhYjg3NmE4N2ViZGI5NTRmZTBiNDYyOGJjYTIyNmZjYzQxODcwNDg#/shared-invite/email>
<p>Slack channel <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=/announcements>
<p>Announcements <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/blog/2021/10/how-to-contribute-to-pmem.io/>
<p>Contribute <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/community/#newsletter>
<p>Newsletter <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/community/#social-media>
<p>Social Media <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
</li>
<li class=menu-item>
<a class=menu-link href=https://pmem.io/solutions><div>Solutions</div></a>
</li>
<li class=menu-item>
<a class=menu-link href=https://pmem.io/blog><div>Blog</div></a>
</li>
<li class=menu-item>
<a class=menu-link href=https://pmem.io/about><div>About</div></a>
</li>
</ul>
</nav>
<form class=top-search-form method=get>
<input id=bcs-searchbox aria-label="Search input" type=text name=q class="form-control bcs-searchbox pt-4" placeholder="Type & Hit Enter.." autocomplete=off>
</form>
</div>
</div>
</div>
<div class="header-wrap-clone dark-mode"></div>
</header>
<div id=customSearch>
<div id=bcs_js_snippet></div>
</div>
<div class="section m-0 bg-transparent library-section dark-mode">
<div class=container>
<div class="row justify-content-between">
<div class="col mt-0 lib-content">
<h1 id=performance---tuning>Performance - Tuning</h1>
<p>A collection of the best methods, practices, and configuration values known for delivering the best possible performance in a consistent and predictable way for the workloads built on the librpma library.</p>
<h2 id=general-notes>General notes</h2>
<p>The <em>Performance - Tuning</em> aims to collect all tested and proven procedures with known beneficial effects on the performance of the workloads built on the librpma library. Nonetheless, each change of configuration should be set up and tested in a testing environment before being applied to a production system. Backing up all data and configuration settings prior to tuning is also recommended.</p>
<h2 id=bios-settings>BIOS settings</h2>
<h3 id=cascade-lake>Cascade Lake</h3>
<ul>
<li>Platform and CPU related <a href=https://software.intel.com/content/www/us/en/develop/articles/optimizing-computer-applications-for-latency-part-1-configuring-the-hardware.html>[1.1]</a>
<ul>
<li>Disable lower CPU power states: C-states <a href=https://www.intel.com/content/www/us/en/develop/documentation/vtune-help/top/reference/user-interface-reference/window-cpu-c-p-states-platform-power-analysis.html>[1.2]</a>, C1E, and memory and PCI-e power saving states. Settings vary from vendor to vendor so some of them may not be available for you e.g.:
<ul>
<li>Power and Performance - CPU C State Control - Package C-State - <strong>C0/C1 state</strong></li>
<li>Power and Performance - CPU C State Control - C1E - <strong>Disabled</strong>
<br><br></li>
</ul>
</li>
<li>Check for other settings that might influence performance. This varies greatly by OEM, but should include anything power related, such as fan speed settings (more is better) e.g.:
<ul>
<li>Power and Performance - CPU Power and Performance Policy - <strong>Performance</strong></li>
<li>System Acoustic and Performance Configuration - Set Fan Profile - <strong>Performance</strong>
<br><br></li>
</ul>
</li>
</ul>
</li>
<li>PMem-related
<ul>
<li>Configure maximum available operating power for your PMem devices <strong>[XXX source and details are missing]</strong>. <strong>Note:</strong> Different sizes of PMem devices have different performance capabilities. If it is important for you, pick the right one for your application e.g.: <a href=https://www.intel.com/content/www/us/en/products/docs/memory-storage/optane-persistent-memory/optane-persistent-memory-200-series-brief.html>[1.3]</a>
<ul>
<li>Memory Configuration - Average Power Budget - <strong>18 mW</strong></li>
<li>Memory Configuration - NVM Performance Setting - <strong>Latency Optimized</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id=not-yet-confirmed-11opt-part-1>Not yet confirmed <a href=https://software.intel.com/content/www/us/en/develop/articles/optimizing-computer-applications-for-latency-part-1-configuring-the-hardware.html>[1.1]</a></h4>
<ul>
<li>Ensure that Intel® Turbo Boost <a href=https://www.intel.com/content/www/us/en/architecture-and-technology/turbo-boost/turbo-boost-technology.html>[1.4]</a> is on.
<ul>
<li>Power and Performance - CPU P State Control - Intel Turbo Boost Technology - <strong>Enabled</strong></li>
<li>Power and Performance - CPU P State Control - Energy Efficient Turbo - <strong>Disabled</strong>
<br><br></li>
</ul>
</li>
<li>Disable hyper-threading to reduce variations in latency (jitter).
<ul>
<li>Processor Configuration - Intel(R) Hyper-Threading Tech - <strong>Disabled</strong>
<br><br></li>
</ul>
</li>
<li>Disable any virtualization options.
<ul>
<li>Processor Configuration - Intel(R) Virtualization Technology - <strong>Disabled</strong>
<br><br></li>
</ul>
</li>
<li>Disable any monitoring options.
<ul>
<li>Memory Configuration - Thermal Monitor - <strong>Disabled</strong>
<br><br></li>
</ul>
</li>
<li>Disable Hardware Power Management, introduced in the Intel® Xeon® processor E5-2600 v4 product family. It provides more control over power management, but it can cause jitter and so is not recommended for latency-sensitive applications.</li>
</ul>
<h3 id=ice-lake>Ice Lake</h3>
<ul>
<li>Platform and CPU related <a href=https://software.intel.com/content/www/us/en/develop/articles/optimizing-computer-applications-for-latency-part-1-configuring-the-hardware.html>[1.1]</a>
<ul>
<li>Disable lower CPU power states: C-states <a href=https://www.intel.com/content/www/us/en/develop/documentation/vtune-help/top/reference/user-interface-reference/window-cpu-c-p-states-platform-power-analysis.html>[1.2]</a> and memory and PCI-e power saving states. Settings vary from vendor to vendor so some of them may not be available for you e.g.:
<ul>
<li>Advanced Power Management Configuration - Package C State Control - Package C-State - <strong>C0/C1 state</strong>
<br><br></li>
</ul>
</li>
<li>Check for other settings that might influence performance. This varies greatly by OEM, but should include anything power related, such as fan speed settings (more is better) e.g.:
<ul>
<li>System Acoustic and Performance Configuration - Set Fan Profile - <strong>Performance</strong></li>
</ul>
</li>
</ul>
</li>
<li>PMem-related
<ul>
<li>configure maximum available operating power for your PMem devices <strong>[XXX source and details are missing]</strong>. <strong>Note</strong>: Different sizes of PMem devices have different performance capabilities. If it is important for you, pick the right one for your application e.g.: <a href=https://www.intel.com/content/www/us/en/products/docs/memory-storage/optane-persistent-memory/optane-persistent-memory-200-series-brief.html>[1.3]</a>
<ul>
<li>Memory Configuration - PMem Configuration - 200 Series PMem Average Power Limit (in mW) - <strong>15 mW</strong></li>
<li>Memory Configuration - PMem Configuration - PMem Performance Setting - <strong>BW Optimized</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id=not-yet-confirmed-11opt-part-1-1>Not yet confirmed <a href=https://software.intel.com/content/www/us/en/develop/articles/optimizing-computer-applications-for-latency-part-1-configuring-the-hardware.html>[1.1]</a></h4>
<ul>
<li>Disable hyper-threading to reduce variations in latency (jitter).
<ul>
<li>Processor Configuration - Intel(R) Hyper-Threading Tech - <strong>Disabled</strong>
<br><br></li>
</ul>
</li>
<li>Disable any monitoring options.
<ul>
<li>Advanced Power Management Configuration - CPU Thermal Management - Thermal Monitor - <strong>Disable</strong>
<br><br></li>
</ul>
</li>
<li>Disable Hardware Power Management, introduced in the Intel® Xeon® processor E5-2600 v4 product family. It provides more control over power management, but it can cause jitter and so is not recommended for latency-sensitive applications.
<ul>
<li>Advanced Power Management Configuration - CPU P State Control - Energy Efficient Turbo - <strong>Disable</strong></li>
<li>Advanced Power Management Configuration - CPU P State Control - Turbo Mode - <strong>Disable</strong></li>
</ul>
</li>
</ul>
<h4 id=references>References</h4>
<ul>
<li>[1.1] <a href=https://software.intel.com/content/www/us/en/develop/articles/optimizing-computer-applications-for-latency-part-1-configuring-the-hardware.html>Optimizing Computer Applications for Latency: Part 1: Configuring the Hardware</a></li>
<li>[1.2] <a href=https://www.intel.com/content/www/us/en/develop/documentation/vtune-help/top/reference/user-interface-reference/window-cpu-c-p-states-platform-power-analysis.html>Intel: Power Management States: P-States, C-States, and Package C-States</a></li>
<li>[1.3] <a href=https://www.intel.com/content/www/us/en/products/docs/memory-storage/optane-persistent-memory/optane-persistent-memory-200-series-brief.html>Intel® Optane™ Persistent Memory 200 Series Brief</a></li>
<li>[1.4] <a href=https://www.intel.com/content/www/us/en/architecture-and-technology/turbo-boost/turbo-boost-technology.html>Intel® Turbo Boost Technology 2.0 - Higher Performance When You Need It Most</a></li>
</ul>
<h2 id=cpu>CPU</h2>
<p>Disabling <code>intel_pstate</code> is recommended for latency sensitive workloads. <a href=https://access.redhat.com/sites/default/files/attachments/201501-perf-brief-low-latency-tuning-rhel7-v2.1.pdf>[2.1]</a></p>
<h3 id=cpu-driver>CPU driver</h3>
<p>To disable <code>intel_pstate</code> CPU driver edit your <code>/etc/default/grub</code> and add the following to the kernel command line:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>GRUB_CMDLINE_LINUX_DEFAULT<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;intel_pstate=disable&#34;</span>
</code></pre></div><p>Rebuild the grub.cfg file as follows (make sure you use the path adjusted to your OS):</p>
<ul>
<li>On BIOS-based machines, issue the following command:</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo grub2-mkconfig -o /boot/grub2/grub.cfg
</code></pre></div><ul>
<li>On UEFI-based machines, issue the following command:</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg
</code></pre></div><p>This change requires a reboot to take effect.</p>
<h3 id=cpu-scaling-governor>CPU scaling governor</h3>
<p>Set the most performant scaling governor:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo cpupower frequency-set --governor performance
</code></pre></div><h3 id=cpu-frequency>CPU frequency</h3>
<p>List available frequencies and pick the biggest one.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>cpupower frequency-info | grep steps
  available frequency steps:  2.30 GHz, 2.30 GHz, 2.20 GHz, 2.10 GHz, 2.00 GHz, 1.90 GHz, 1.80 GHz, 1.70 GHz, 1.60 GHz, 1.50 GHz, 1.40 GHz, 1.30 GHz, 1.20 GHz, 1.10 GHz, <span style=color:#ae81ff>1000</span> MHz
</code></pre></div><p>Set the frequency range to the single biggest available value:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>FREQ<span style=color:#f92672>=</span>2.3Ghz
sudo cpupower frequency-set --min $FREQ
sudo cpupower frequency-set --max $FREQ
</code></pre></div><h3 id=references-1>References</h3>
<ul>
<li>[2.1] <a href=https://access.redhat.com/sites/default/files/attachments/201501-perf-brief-low-latency-tuning-rhel7-v2.1.pdf>Low Latency Performance Tuning for
Red Hat Enterprise Linux 7</a></li>
</ul>
<h2 id=rdma-capable-network-interface-rnic>RDMA-capable network interface (RNIC)</h2>
<h3 id=pcie-attributes-31mlx-pcie>PCIe attributes <a href=https://support.mellanox.com/s/article/understanding-pcie-configuration-for-maximum-performance>[3.1]</a></h3>
<ul>
<li>Width - provide for the RNIC the maximum number of PCIe lanes it is capable of using</li>
<li>Speed - attach the RNIC to PCIe interface of maximum supported speed</li>
<li>Max Payload Size - learn what the Max Payload Size for your system is and adjust expectations accordingly</li>
<li>Max Read Request - configure the maximum available read request value</li>
</ul>
<p>Knowing all of these attributes allows calculating the RNIC bandwidth limitation. For details please see “Understanding PCIe Configuration for Maximum Performance” Chapter <a href=https://support.mellanox.com/s/article/understanding-pcie-configuration-for-maximum-performance#Calculating-PCIe-Limitations>&ldquo;Calculating PCIe Limitations&rdquo;</a>.</p>
<h3 id=link-mode-32mlx-port-speed>Link mode <a href=https://support.mellanox.com/s/article/howto-change-the-ethernet-port-speed-of-mellanox-adapters--linux-x>[3.2]</a></h3>
<p>List supported link modes:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ ethtool ens785f0
Settings <span style=color:#66d9ef>for</span> ens785f0:
        Supported ports: <span style=color:#f92672>[</span> Backplane <span style=color:#f92672>]</span>
        Supported link modes:   1000baseKX/Full
<span style=color:#75715e># ...</span>
                                100000baseKR4/Full
                                100000baseSR4/Full
                                100000baseCR4/Full
                                100000baseLR4_ER4/Full
<span style=color:#75715e># ...</span>
</code></pre></div><p>Set the maximum available value:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ sudo ethtool -s ens785f0 speed <span style=color:#ae81ff>100000</span> autoneg off
</code></pre></div><h3 id=maximum-transmission-unit-mtu-33mlx-mtu>Maximum Transmission Unit (MTU) <a href=https://support.mellanox.com/s/article/mtu-considerations-for-roce-based-applications>[3.3]</a></h3>
<p>Set MTU to the maximum recommended value. In most cases, it is 4200.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ ifconfig ens785f0 mtu <span style=color:#ae81ff>4200</span>
</code></pre></div><h4 id=references-2>References</h4>
<ul>
<li>[3.1] <a href=https://support.mellanox.com/s/article/understanding-pcie-configuration-for-maximum-performance>Mellanox: Understanding PCIe Configuration for Maximum Performance</a></li>
<li>[3.2] <a href=https://support.mellanox.com/s/article/howto-change-the-ethernet-port-speed-of-mellanox-adapters--linux-x>Mellanox: HowTo Change the Ethernet Port Speed of Mellanox Adapters (Linux)</a></li>
<li>[3.3] <a href=https://support.mellanox.com/s/article/mtu-considerations-for-roce-based-applications>Mellanox: MTU Considerations for RoCE based Applications</a></li>
</ul>
<h2 id=running-workloads>Running workloads</h2>
<p>In order to learn how to run the individual workloads, please visit: <a href=https://github.com/pmem/rpma/blob/master/tools/perf/BENCHMARKING.md>https://github.com/pmem/rpma/master/tools/perf/BENCHMARKING.md</a></p>
<h2 id=disclaimer>Disclaimer</h2>
<p>Performance varies by use, configuration and other factors.</p>
<p>No product or component can be absolutely secure.</p>
<p>Your costs and results may vary.</p>
<p>Intel technologies may require enabled hardware, software or service activation.</p>
<p>Intel disclaims all express and implied warranties, including without limitation, the implied warranties of merchantability, fitness for a particular purpose, and non-infringement, as well as any warranty arising from course of performance, course of dealing, or usage in trade.</p>
</div>
</div>
<div class=divider></div>
<p class=text-center><small>The contents of this web site and the associated <a href=https://github.com/pmem>GitHub repositories</a> are BSD-licensed open source.</small></p>
</div>
</div>
<footer id=footer class="border-0 bg-white">
<div id=copyrights>
<div class="container clearfix">
<div class="row justify-content-between col-mb-30">
<div class="col-12 col-lg-auto text-center text-lg-start">
<div id=logo>
<a href=/ class=standard-logo data-dark-logo=images/logo-dark.png><img src=https://pmem.io/images/pmem_logo.png alt="PMem Logo"></a>
<a href=/ class=retina-logo data-dark-logo=images/logo-dark@2x.png><img src=https://pmem.io/images/pmem_logo.png alt="PMem Logo"></a>
</div>
</div>
<div class="col-12 col-lg-auto text-center text-lg-end">
<div class="copyrights-menu copyright-links clearfix text-uppercase">
<a href=https://pmem.io/about>about</a>/
<a href=https://pmem.io/blog>blog</a>/
<a href=https://pmem.io/community>community</a>/
<a href=https://pmem.io/cookies.html>Cookies</a>/
<a href=https://pmem.io/developer-hub>developer Hub</a>/
<a href=https://pmem.io/learn>learn</a>/
<a href=https://pmem.io/privacy.html>Privacy</a>/
<a href=https://pmem.io/solutions>solutions</a>/
<a href=https://pmem.io/terms.html>Terms</a>
</div>
<div class="col-lg-auto text-center mt-0">
<p>Copyright &copy; 2022 pmem.io</p>
</div>
</div>
</div>
</div>
</div>
</footer>
</div>
<div id=gotoTop class=icon-angle-up></div>
<script src=/js/jquery.js></script>
<script src=/js/plugins.min.js></script>
<script src=/js/custom.js></script>
<script src=/js/darkmode.js></script>
<script src=/js/functions.js></script>
<script type=text/javascript src="https://ui.customsearch.ai/api/ux/rendering-js?customConfig=011a90aa-26ea-46b5-bf60-4b5b407c72c6&market=en-US&version=latest&q="></script>
</body>
</html>