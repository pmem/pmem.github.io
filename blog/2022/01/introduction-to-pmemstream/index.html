<!doctype html><html dir=ltr lang=en-us><head>
<link rel=stylesheet type=text/css href=/css/style.css>
<meta property="og:title" content="Introduction to pmemstream">
<meta property="og:description" content="An overview of a new library - pmemstream">
<meta property="og:type" content="article">
<meta property="og:url" content="https://pmem.io/blog/2022/01/introduction-to-pmemstream/"><meta property="article:section" content="blog">
<meta property="article:published_time" content="2022-01-26T00:00:00+00:00">
<meta property="article:modified_time" content="2022-01-26T00:00:00+00:00">
<meta charset=utf-8>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<title>Introduction to pmemstream</title>
<meta name=author content="PMem.io">
<meta name=description content="An overview of a new library - pmemstream">
<meta name=robots content="index, follow, archive">
<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,900&display=swap" rel=stylesheet type=text/css>
<link rel=stylesheet href=/css/bootstrap.css type=text/css>
<link rel=stylesheet href=/css/style.css type=text/css>
<link rel=stylesheet href=/css/dark.css type=text/css>
<link rel=stylesheet href=/css/font-icons.css type=text/css>
<link rel=stylesheet href=/css/animate.css type=text/css>
<link rel=stylesheet href=/css/magnific-popup.css type=text/css>
<link rel=stylesheet href=/css/et-line.css type=text/css>
<link rel=stylesheet href=/css/components/bs-switches.css type=text/css>
<link rel=stylesheet href=/css/custom.css type=text/css>
<meta name=viewport content="initial-scale=1,viewport-fit=cover">
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css type=text/css>
<link rel=stylesheet href="/css/colors.php?color=FE9603" type=text/css>
<link rel=stylesheet href=/css/template/fonts.css type=text/css>
<link rel=stylesheet href=/css/template/seo.css type=text/css>
</head>
<body class=stretched>
<div id=wrapper class=clearfix>
<header id=header class="transparent-header floating-header header-size-md sticky-header">
<div id=header-wrap class=dark-mode>
<div class="container dark-mode">
<div class=header-row>
<div id=logo class=logo_dark>
<a href=/ class=standard-logo data-dark-logo=images/logo-dark.png><img src=https://pmem.io/images/pmem_logo.png alt=PMem.io></a>
<a href=/ class=retina-logo data-dark-logo=images/logo-dark@2x.png><img src=https://pmem.io/images/pmem_logo.png alt=PMem.io></a>
</div>
<div id=logo class=logo_light>
<a href=/ class=standard-logo data-dark-logo=images/logo-dark.png><img src=https://pmem.io/images/pmem_logo_white.png alt=PMem.io></a>
<a href=/ class=retina-logo data-dark-logo=images/logo-dark@2x.png><img src=https://pmem.io/images/pmem_logo_white.png alt=PMem.io></a>
</div>
<div class=header-misc>
<div id=top-search class=header-misc-icon>
<a href=# id=top-search-trigger><i class=icon-line-search></i><i class=icon-line-cross></i></a>
</div>
<div class=top-links>
<ul class=top-links-container>
<li>
<div id=darkSwitch class="dark-mode header-misc-icon d-md-block">
<a href=#><i id=darkSwitchToggle></i></a>
</div>
</li>
</ul>
</div>
</div>
<div id=primary-menu-trigger><svg class="svg-trigger" viewBox="0 0 100 100"><path d="m30 33h40c3.722839.0 7.5 3.126468 7.5 8.578427C77.5 47.030386 74.772971 50 70 50H50"/><path d="m30 50h40"/><path d="m70 67H30s-7.5-.802118-7.5-8.365747C22.5 51.070624 30 50 30 50h20"/></svg>
</div>
<nav class="primary-menu with-arrows">
<ul class=menu-container>
<li class="menu-item mega-menu">
<div class=menu-link>
<div><a href=/developer-hub>Developer Hub</a></div>
</div>
<div class="mega-menu-content mega-menu-style-2 px-0">
<div class="container dark-mode">
<div class=row>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class=fbox-content>
<p class=fw-bold>For Developers</p>
<p>Everything you need to know about Persistent Memory.</p>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=https://docs.pmem.io/persistent-memory/getting-started-guide>
<p>Get started <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/pmdk>
<p>PMDK <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/repoindex>
<p>PMem Repositories <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/pmemkv>
<p>PMemKV <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=http://memkind.github.io/memkind/>
<p>Memkind <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/community/#newsletter>
<p>Newsletter <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://tieredmemdb.github.io/>
<p>TieredMemDB <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
</li>
<li class="menu-item mega-menu">
<div class=menu-link>
<div><a href=/learn>Learn</a></div>
</div>
<div class="mega-menu-content mega-menu-style-2 px-0">
<div class="container dark-mode">
<div class=row>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class=fbox-content>
<p class=fw-bold>Access our Documentation</p>
<p>Learn more about Persistent Memory features and capabilities.</p>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=/books>
<p>Books <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://docs.pmem.io/persistent-memory/>
<p>Docs <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/glossary>
<p>Glossary <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://docs.pmem.io/ipmctl-user-guide/>
<p>ipmctl User Guide <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://docs.pmem.io/ndctl-user-guide/>
<p>ndctl User Guide <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=/faq>
<p>FAQ <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/knowledgebase>
<p>Knowledge base <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/tutorials>
<p>Tutorials <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/videos>
<p>Videos <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/webinars>
<p>Webinars <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
</li>
<li class="menu-item mega-menu">
<div class=menu-link>
<div><a href=/community>Community</a></div>
</div>
<div class="mega-menu-content mega-menu-style-2 px-0">
<div class="container dark-mode">
<div class=row>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class=fbox-content>
<p class=fw-bold>Get Connected</p>
<p>Join an ever-growing community of PMDK-PMEM developers online or in person.</p>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=/events>
<p>Events <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://groups.google.com/group/pmem>
<p>Forum <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=https://pmem-io.slack.com/join/shared_invite/enQtNzU4MzQ2Mzk3MDQwLWQ1YThmODVmMGFkZWI0YTdhODg4ODVhODdhYjg3NmE4N2ViZGI5NTRmZTBiNDYyOGJjYTIyNmZjYzQxODcwNDg#/shared-invite/email>
<p>Slack channel <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
<div class="mega-menu-column sub-menu-container col-lg-4 border-bottom py-4">
<div class=feature-box>
<div class="fbox-content h-bg-light">
<a href=/announcements>
<p>Announcements <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/blog/2021/10/how-to-contribute-to-pmem.io/>
<p>Contribute <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/community/#newsletter>
<p>Newsletter <i class=icon-angle-right></i></p>
</a>
</div>
<div class="fbox-content h-bg-light">
<a href=/community/#social-media>
<p>Social Media <i class=icon-angle-right></i></p>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
</li>
<li class=menu-item>
<a class=menu-link href=https://pmem.io/solutions><div>Solutions</div></a>
</li>
<li class=menu-item>
<a class=menu-link href=https://pmem.io/blog><div>Blog</div></a>
</li>
<li class=menu-item>
<a class=menu-link href=https://pmem.io/about><div>About</div></a>
</li>
</ul>
</nav>
<form class=top-search-form method=get>
<input id=bcs-searchbox aria-label="Search input" type=text name=q class="form-control bcs-searchbox pt-4" placeholder="Type & Hit Enter.." autocomplete=off>
</form>
</div>
</div>
</div>
<div class="header-wrap-clone dark-mode"></div>
</header>
<div id=customSearch>
<div id=bcs_js_snippet></div>
</div>
<section id=content>
<div class="content-wrap dark-mode">
<div class="container clearfix">
<div class="row gutter-40 col-mb-80">
<div class="postcontent col-lg-9 order-lg-last">
<div class="single-post mb-0">
<div class="entry clearfix">
<div class=entry-title>
<h2>Introduction to pmemstream</h2>
</div>
<div class=entry-meta>
<ul>
<li><i class=icon-calendar3></i> 26 Jan, 2022</li>
<li><i class=icon-user></i> Lukaszstolarczuk</li>
<li>
<i class=icon-folder-open></i>
Pmemstream
</li>
</ul>
</div>
<div class=entry-image>
<img src=/images/posts/pmemstream_intro.png alt="Introduction to pmemstream">
</div>
<div class="entry-content mt-0">
<h1 id=what-is-pmemstream>What is pmemstream?</h1>
<p>Libpmemstream implements a pmem-optimized log data structure and provides stream-like access to data.
It presents a contiguous logical address space, divided into regions, with log entries of arbitrary size.
We intend for this library to be a foundation for various, more complex higher-level solutions. Read on
to learn about a few example use cases we have in mind. Like most libraries in the PMDK family, this one
also focuses on delivering a generic, easy-to-use set of functions.</p>
<p>Current implementation, examples, and known caveats are accessible at the <a href=https://github.com/pmem/pmemstream>pmemstream GitHub page</a>.
Please bear in mind this library is still in an early stage of development. As this is a work in progress,
its behavior or APIs may change without prior notice.</p>
<h1 id=why-we-implement-it>Why we implement it?</h1>
<p>As keen PMDK users should know by now, we already have <a href=/pmdk/libpmemlog/>libpmemlog</a> in our portfolio.
Even though it&rsquo;s very similar in basic concept, it&rsquo;s implemented in a straightforward manner and
does not allow easy extensions. Because we couldn&rsquo;t easily add all new features to the libpmemlog
we decided to design something new from scratch. If you&rsquo;re interested in our early rationale for creating
libpmemstream please see <a href=https://github.com/pmem/pmdk/issues/4930>&ldquo;Feature Request&rdquo; issue on PMDK&rsquo;s GitHub page</a>.</p>
<p>What we wanted is to provide a flexible implementation of stream/log structure, so it could be used in many
different solutions, e.g.:</p>
<ul>
<li>persistent double-write buffer in databases,</li>
<li>persistent level in LSM tree implementations,</li>
<li>a base for any copy-on-write data structure,</li>
<li>transactional undo or redo logs, like in <a href=/blog/2015/06/an-introduction-to-pmemobj-part-2-transactions/>libpmemobj</a>,</li>
<li>PMEM-buffered file I/O primitives that offload to a slower medium.</li>
</ul>
<p>We aim to deliver a set of functions with various parameters. Our intention is to ensure that pmemstream is
useful in a wide range of use cases. By creating this library, we hope we will eliminate the need for software
developers to create their own custom algorithms and structures for common patterns in storage and memory
solutions, especially those that utilize PMem.</p>
<p>Core features in libpmemstream are:</p>
<ul>
<li>new data entries (each of arbitrary size) are appended at the end (of a region),</li>
<li>no data modification allowed (only appending),</li>
<li>each entry append is atomic (no data consistency issues),</li>
<li>iterators allow reading data in sequence (they provide stream-like functionality).</li>
</ul>
<p>We hope everyone can benefit from a ready-to-use library. We wanted to assure it is as reliable as possible.
It&rsquo;s delivered with a set of tests and was validated with pmem debug tools. We guarantee persistency and
data integrity, which is especially important to handle on persistent memory. Using this library is easy and
doesn&rsquo;t require a broad knowledge of lower-level pmem libraries. And finally, PMDK developers all are
active members of pmem community, always ready to help and eager to solve issues.</p>
<h1 id=what-the-future-holds>What the future holds?</h1>
<p>First of all, as I wrote above - this library is still a work in progress, not yet ready for production code.
We continue to extend it with new features, new tests, all kinds of fixes, and even API refactors/extensions.
Some of the claims I made earlier (especially about guarantees) may not yet be entirely true. However, once
the library reaches its first release, we will guarantee correctness and reliability.</p>
<p>There are at least several enhancements we are considering implementing as of today. Many of our ideas are
written down (and labeled with &ldquo;Type: Feature&rdquo;) on our <a href=https://github.com/pmem/pmemstream/issues>issues page on GitHub</a>.</p>
<p>The most significant features are:</p>
<ul>
<li><a href=https://github.com/pmem/pmemstream/issues/75>support for multi-process access</a> - at most one writer process, multiple reader processes.</li>
<li><a href=https://github.com/pmem/pmemstream/issues/76>asynchronous API</a> (using, e.g., another work-in-progress library - <a href=https://github.com/pmem/miniasync>miniasync</a>).
Right now, all functions are &ldquo;blocking&rdquo;, and we want to change it for better performance and a more flexible
user experience. It will allow pmemstream to more efficiently utilize asynchronous data movement interfaces,
like <a href=https://01.org/blogs/2019/introducing-intel-data-streaming-accelerator>DSA</a> or async I/O (e.g., io_uring). It will also allow exposing different types of medium
underneath (e.g., block devices with higher latency).</li>
<li>RDMA support. We&rsquo;d like to enable storing data using RDMA protocol. This could be considered as yet another
type of medium - &ldquo;remote memory&rdquo;. Users could easily use remote stream, e.g., for backup, balancing workload,
simple but extremely fast remote message passing, or any other use cases. We plan on implementing this using
another of our libraries - <a href=https://github.com/pmem/rpma>librpma</a>.</li>
</ul>
<p>The above list is, of course, in no way complete, and we are likely to change plans as we learn.</p>
<p>I hope it goes without saying, but if you find something missing in the library or want to share some
feedback with us (perhaps, an improvement idea, or just to show your interest), don&rsquo;t hesitate to
<a href=https://github.com/pmem/pmemstream/issues>file an issue on our GitHub page</a>. Alternatively, you can always catch us on
<a href=/community/>various channels of communication</a>.</p>
<div class="tagcloud clearfix bottommargin">
<a href=https://pmem.io/tags/intro>Intro</a>
</div>
<div class=clear></div>
<div class="si-share border-0 d-flex justify-content-between align-items-center">
<span>Share this Post:</span>
<div id=share-buttons>
<div class="social-icon si-borderless si-facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=https://pmem.io/blog/2022/01/introduction-to-pmemstream/')">
<i class=icon-facebook></i>
<i class=icon-facebook></i>
</div>
<div class="social-icon si-borderless si-twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/intent/tweet?text=Introduction to pmemstream&url=https://pmem.io/blog/2022/01/introduction-to-pmemstream/')">
<i class=icon-twitter></i>
<i class=icon-twitter></i>
</div>
<div class="social-icon si-borderless si-linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=https://pmem.io/blog/2022/01/introduction-to-pmemstream/&title=&summary=&source=')">
<i class=icon-linkedin></i>
<i class=icon-linkedin></i>
</div>
<div class="social-icon si-borderless si-pinterest" title="Share this on Pinterest" onclick="window.open('https://pinterest.com/pin/create/button/?url=&media=/images/posts/pmemstream_intro.png&description=')">
<i class=icon-pinterest></i>
<i class=icon-pinterest></i>
</div>
<div class="social-icon si-borderless si-email3" title="Share this through Email" onclick="window.open('mailto:?&body=https://pmem.io/blog/2022/01/introduction-to-pmemstream/')">
<i class=icon-email3></i>
<i class=icon-email3></i>
</div>
</div>
</div>
</div>
</div>
<div class="row justify-content-between col-mb-30 post-navigation">
<div class="col-12 col-md-auto text-center">
<a href="https://pmem.io/blog/2022/02/leveraging-asynchronous-hardware-accelerators-for-fun-and-profit/?ref=footer">&lArr; Leveraging asynchronous...</a>
</div>
<div class="col-12 col-md-auto text-center">
<a href="https://pmem.io/blog/2022/01/disaggregated-memory-in-pursuit-of-scale-and-efficiency/?ref=footer">Disaggregated Memory - In... &rArr;</a>
</div>
</div>
<div class=line></div>
<h4>Related Posts:</h4>
<div class="related-posts row posts-md col-mb-30">
</div>
</div>
</div>
<div class="sidebar col-lg-3">
<div class=sidebar-widgets-wrap>
<div class="widget clearfix">
<h4>Tag Cloud</h4>
<div class=tagcloud>
<a href=/tags/pmem class=block role=button>pmem</a>
<a href=/tags/persistent-memory class=block role=button>persistent-memory</a>
<a href=/tags/ndctl class=block role=button>ndctl</a>
<a href=/tags/daxctl class=block role=button>daxctl</a>
<a href=/tags/pmdk class=block role=button>pmdk</a>
<a href=/tags/async class=block role=button>async</a>
<a href=/tags/asynchronous class=block role=button>asynchronous</a>
<a href=/tags/concurrency class=block role=button>concurrency</a>
<a href=/tags/configure class=block role=button>configure</a>
<a href=/tags/dax class=block role=button>dax</a>
<a href=/tags/install class=block role=button>install</a>
<a href=/tags/miniasync class=block role=button>miniasync</a>
<a href=/tags/setup class=block role=button>setup</a>
<a href=/tags/dml class=block role=button>dml</a>
<a href=/tags/dsa class=block role=button>dsa</a>
<a href=/tags/faq class=block role=button>faq</a>
<a href=/tags/imdb class=block role=button>imdb</a>
<a href=/tags/memkind class=block role=button>memkind</a>
<a href=/tags/pmem2 class=block role=button>pmem2</a>
<a href=/tags/sanitize class=block role=button>sanitize</a>
<a href=/tags/secure-erase class=block role=button>secure-erase</a>
<a href=/tags/sql class=block role=button>sql</a>
<a href=/tags/2019 class=block role=button>2019</a>
<a href=/tags/blogs class=block role=button>blogs</a>
<a href=/tags/crash class=block role=button>crash</a>
<a href=/tags/create class=block role=button>create</a>
<a href=/tags/cxl class=block role=button>cxl</a>
<a href=/tags/database class=block role=button>database</a>
<a href=/tags/destroy class=block role=button>destroy</a>
<a href=/tags/developer class=block role=button>developer</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<footer id=footer class="border-0 bg-white">
<div id=copyrights>
<div class="container clearfix">
<div class="row justify-content-between col-mb-30">
<div class="col-12 col-lg-auto text-center text-lg-start">
<div id=logo>
<a href=/ class=standard-logo data-dark-logo=images/logo-dark.png><img src=https://pmem.io/images/pmem_logo.png alt="PMem Logo"></a>
<a href=/ class=retina-logo data-dark-logo=images/logo-dark@2x.png><img src=https://pmem.io/images/pmem_logo.png alt="PMem Logo"></a>
</div>
</div>
<div class="col-12 col-lg-auto text-center text-lg-end">
<div class="copyrights-menu copyright-links clearfix text-uppercase">
<a href=https://pmem.io/about>about</a>/
<a href=https://pmem.io/blog>blog</a>/
<a href=https://pmem.io/community>community</a>/
<a href=https://pmem.io/cookies.html>Cookies</a>/
<a href=https://pmem.io/developer-hub>developer Hub</a>/
<a href=https://pmem.io/learn>learn</a>/
<a href=https://pmem.io/privacy.html>Privacy</a>/
<a href=https://pmem.io/solutions>solutions</a>/
<a href=https://pmem.io/terms.html>Terms</a>
</div>
<div class="col-lg-auto text-center mt-0">
<p>Copyright &copy; 2022 pmem.io</p>
</div>
</div>
</div>
</div>
</div>
</footer>
</div>
<div id=gotoTop class=icon-angle-up></div>
<script src=/js/jquery.js></script>
<script src=/js/plugins.min.js></script>
<script src=/js/custom.js></script>
<script src=/js/darkmode.js></script>
<script src=/js/functions.js></script>
<script type=text/javascript src="https://ui.customsearch.ai/api/ux/rendering-js?customConfig=011a90aa-26ea-46b5-bf60-4b5b407c72c6&market=en-US&version=latest&q="></script>
</body>
</html>